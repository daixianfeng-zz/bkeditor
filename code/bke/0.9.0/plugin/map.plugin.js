/*! Bkeditor - v0.9.0 - 2013-07-29
* https://github.com/daixianfeng/bkeditor
* Copyright (c) 2013 daixianfeng;*/
(function(e){e.addUi({id:"mapdialog",submit:function(t){var n=$("#mapdialog");if(0===n.size())return!1;var i=t.Main,r=(i.geocoder,i.map),o=r.getCenter().lat()+","+r.getCenter().lng(),a=i.marker?i.marker.position:o,s=r.getZoom(),l=r.getMapTypeId(),d="http://maps.google.com/maps/api/staticmap?center="+o+"&zoom="+s+"&size=520x340"+"&maptype="+l+"&markers="+a+"&language=zh-cn"+"&sensor=false",c='<img class="googlemap" src="'+d+'" title="'+i.address+'" alt="'+i.address+'"/>';e.utils.pasteHTML(c)}})})(window.jQuery.jQEditor),function(e){var t=null;e.addPlugin({id:"map",type:"dialog",showDialog:function(n){var i=n.Eid;e.dialog.open({id:"mapdialog",editor:i,title:"插入地图",content:'<iframe src="'+e.config.cBase.skinDir+'googlemap.htm" name="googlemapframe" style="width: 600px; height: 350px; border: 0px none;" frameborder="0" allowtransparency="true"></iframe>',ok:function(){e.dialog.revertSelection(),e.command("mapdialog","submit",t)},cancel:function(){e.dialog.close("mapdialog")},init:function(){t=window.frames.googlemapframe},icon:"succeed"})}})}(window.jQuery.jQEditor);